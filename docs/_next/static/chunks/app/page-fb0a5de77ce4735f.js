(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{141:(e,t,a)=>{Promise.resolve().then(a.bind(a,897))},897:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var r=a(5155),s=a(2115),l=a(3568);function n(e){let{tasks:t,onImport:a}=e;return(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>{let e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),a=URL.createObjectURL(e),r=document.createElement("a");r.href=a,r.download="tasks.json",r.click()},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded",children:"Eksportuj JSON"}),(0,r.jsx)("button",{onClick:()=>{let e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=async e=>{let t=e.target.files[0];if(t)try{let e=await t.text(),r=JSON.parse(e);Array.isArray(r)?(a(r),l.oR.success("Zaimportowano dane!")):l.oR.error("Plik musi zawierać tablicę zadań.")}catch(e){l.oR.error("Błąd podczas importu pliku.")}},e.click()},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded",children:"Importuj JSON"})]})}function i(){let[e,t]=(0,s.useState)("light");return(0,s.useEffect)(()=>{let e=localStorage.getItem("theme");e&&(t(e),document.documentElement.classList.toggle("dark","dark"===e))},[]),(0,r.jsx)("button",{onClick:()=>{let a="light"===e?"dark":"light";t(a),localStorage.setItem("theme",a),document.documentElement.classList.toggle("dark","dark"===a)},className:"px-3 py-1 text-sm bg-gray-200 dark:bg-gray-700 rounded-full dark:text-white hover:bg-gray-300 dark:hover:bg-gray-600 transition",children:"light"===e?"☀ Tryb Jasny":"\uD83C\uDF19 Tryb Ciemny"})}function d(e){let{children:t,tasks:a,onImport:s}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.l$,{position:"top-right"}),(0,r.jsxs)("main",{className:"min-h-screen w-full bg-transparent",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center px-6 pt-4",children:[(0,r.jsx)(i,{}),(0,r.jsx)(n,{tasks:a,onImport:s})]}),t]})]})}var o=a(6766);function c(){return(0,r.jsxs)("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-gray-900 text-white dark:bg-black shadow-md px-6 py-4 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(o.default,{src:"/icons/flower.gif",alt:"Logo",width:40,height:40,className:"rounded-full"}),(0,r.jsx)("span",{className:"text-xl font-semibold whitespace-nowrap",children:"WhatToDo App"})]}),(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsx)(i,{})})]})}function g(e){let{tasks:t,onEdit:a,onPreview:s,getCategoryColor:l}=e,n=new Date().toISOString().slice(0,10),i=t.filter(e=>e.deadline===n);return(0,r.jsxs)("section",{children:[(0,r.jsxs)("h2",{className:"text-lg font-bold text-white",children:["Zadania na dziś: ",new Date().toLocaleDateString("pl-PL")]}),0===i.length?(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Brak zadań na dziś."}):(0,r.jsx)("ul",{className:"space-y-2",children:i.map(e=>(0,r.jsxs)("li",{onClick:()=>s(e),className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,r.jsx)("h3",{className:"font-semibold",children:e.title}),(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),a(e.id)},className:"text-sm px-2 py-1 bg-yellow-600 rounded",children:"Edytuj"})]}),e.description&&(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 truncate",children:e.description}),(0,r.jsxs)("div",{className:"mt-2 flex items-center justify-between text-xs",children:[(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-white ".concat(l(e.category)),children:e.category}),(0,r.jsx)("span",{className:"italic text-gray-500 dark:text-gray-400",children:new Date(e.deadline).toLocaleDateString()})]})]},e.id))})]})}function x(e){let{task:t,onToggle:a,onDelete:s,onEdit:l,onPreview:n,getCategoryColor:i}=e;return(0,r.jsxs)("div",{className:"p-4 bg-gray-100 dark:bg-gray-700 rounded-lg shadow cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-600 transition",onClick:()=>n(t),children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:t.title}),(0,r.jsx)("button",{className:"text-sm px-2 py-1 bg-blue-600 text-white rounded",onClick:e=>{e.stopPropagation(),a(t.id)},children:t.completed?"Cofnij":"Zrobione"})]}),t.description&&(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1 truncate",children:t.description}),(0,r.jsxs)("div",{className:"mt-2 flex justify-between items-center text-sm",children:[(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-white text-xs ".concat(i(t.category)),children:t.category}),(0,r.jsx)("span",{className:"text-gray-500 dark:text-gray-400 text-xs italic",children:new Date(t.deadline).toLocaleDateString()})]}),(0,r.jsxs)("div",{className:"mt-2 flex justify-end space-x-2",children:[(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),l(t.id)},className:"px-2 py-1 text-sm bg-yellow-600 rounded text-white",children:"Edytuj"}),(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),s(t.id)},className:"px-2 py-1 text-sm bg-red-500 text-white rounded",children:"Usuń"})]})]})}function u(e){let{onAdd:t,categories:a}=e,[l,n]=(0,s.useState)(""),[i,d]=(0,s.useState)(""),[o,c]=(0,s.useState)(""),[g,x]=(0,s.useState)("");return(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l&&o&&(t(l,i,o,g),n(""),d(""),c(""),x(""))},className:"flex-1 bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Nowe zadanie"}),(0,r.jsx)("input",{type:"text",placeholder:"Tytuł zadania",className:"w-full p-3 mb-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900",value:l,onChange:e=>n(e.target.value)}),(0,r.jsx)("textarea",{placeholder:"Opis zadania",className:"w-full p-3 mb-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900",value:i,onChange:e=>d(e.target.value)}),(0,r.jsxs)("select",{value:o,onChange:e=>c(e.target.value),className:"w-full p-3 mb-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900",children:[(0,r.jsx)("option",{value:"",children:"Wybierz kategorię"}),a.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsx)("input",{type:"date",className:"w-full p-3 mb-4 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900",value:g,onChange:e=>x(e.target.value)}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-4 rounded-lg transition",children:"Dodaj zadanie"})]})}function m(e){let{categories:t,onAdd:a,onDelete:l}=e,[n,i]=(0,s.useState)("");return(0,r.jsxs)("div",{className:"flex-1 bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Kategorie:"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n&&!t.includes(n)&&(a(n),i(""))},className:"flex gap-3 mb-4",children:[(0,r.jsx)("input",{className:"flex-grow p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900",value:n,onChange:e=>i(e.target.value),placeholder:"Nowa kategoria"}),(0,r.jsx)("button",{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white font-semibold px-5 py-2 rounded-lg transition",children:"Dodaj"})]}),(0,r.jsx)("ul",{className:"space-y-2",children:t.map(e=>(0,r.jsxs)("li",{className:"flex items-center justify-between bg-gray-100 dark:bg-gray-700 px-4 py-2 rounded-lg",children:[(0,r.jsx)("span",{className:"text-gray-800 dark:text-white",children:e}),(0,r.jsx)("button",{onClick:()=>l(e),className:"text-red-500 hover:text-red-600 font-medium transition",children:"Usuń"})]},e))})]})}function h(e){let{sort:t,onSortChange:a}=e;return(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-6 text-sm",children:[(0,r.jsx)("label",{className:"font-medium text-white",children:"Sortuj:"}),(0,r.jsxs)("select",{value:t,onChange:e=>a(e.target.value),className:"min-w-[160px] px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-800 dark:text-white shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition cursor-pointer",children:[(0,r.jsx)("option",{value:"",children:"Domyślnie"}),(0,r.jsx)("option",{value:"title-asc",children:"Tytuł A–Z"}),(0,r.jsx)("option",{value:"title-desc",children:"Tytuł Z–A"}),(0,r.jsx)("option",{value:"date-asc",children:"Data rosnąco"}),(0,r.jsx)("option",{value:"date-desc",children:"Data malejąco"})]})]})}function p(e){let{status:t,onChange:a}=e,s=e=>"".concat("px-4 py-2 text-sm font-medium rounded-full transition-all focus:outline-none"," ").concat(t===e?"bg-pink-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600");return(0,r.jsxs)("div",{className:"flex flex-wrap gap-3 mb-6",children:[(0,r.jsx)("button",{className:s("all"),onClick:()=>a("all"),children:"Wszystkie"}),(0,r.jsx)("button",{className:s("active"),onClick:()=>a("active"),children:"Niezrobione"}),(0,r.jsx)("button",{className:s("done"),onClick:()=>a("done"),children:"Zrobione"})]})}function b(e){let{task:t,onClose:a,onSave:l,categories:n}=e,[i,d]=(0,s.useState)(""),[o,c]=(0,s.useState)(""),[g,x]=(0,s.useState)(""),[u,m]=(0,s.useState)("");return((0,s.useEffect)(()=>{t&&(d(t.title),c(t.description),x(t.deadline),m(t.category))},[t]),t)?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md shadow-lg",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4 dark:text-white",children:"Edytuj zadanie"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l({...t,title:i,description:o,deadline:g,category:u}),a()},className:"space-y-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Tytuł",value:i,onChange:e=>d(e.target.value),className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white",required:!0}),(0,r.jsx)("textarea",{placeholder:"Opis",value:o,onChange:e=>c(e.target.value),className:"w-full p-2 border rounded-md resize-none h-40 whitespace-pre-wrap break-words dark:bg-gray-700 dark:text-white",required:!0}),(0,r.jsx)("input",{type:"date",value:g,onChange:e=>x(e.target.value),className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white",required:!0}),(0,r.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white",required:!0,children:[(0,r.jsx)("option",{value:"",children:"Wybierz kategorię"}),n.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,r.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 rounded hover:bg-gray-400 dark:hover:bg-gray-500",children:"Anuluj"}),(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Zapisz"})]})]})]})}):null}function y(e){let{task:t,onClose:a,getCategoryColor:s}=e;return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center px-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg max-w-lg w-full relative",children:[(0,r.jsx)("button",{onClick:a,className:"absolute top-3 right-3 text-gray-400 hover:text-gray-800 dark:hover:text-white",children:"✖"}),(0,r.jsx)("h2",{className:"text-xl font-bold mb-2",children:t.title}),t.description&&(0,r.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:t.description}),(0,r.jsxs)("div",{className:"text-sm mb-2",children:[(0,r.jsx)("strong",{children:"Kategoria:"})," ",(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-white text-xs ".concat(s(t.category)),children:t.category})]}),(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("strong",{children:"Termin:"})," ",(0,r.jsx)("span",{className:"italic text-gray-500 dark:text-gray-400",children:new Date(t.deadline).toLocaleDateString()})]})]})}):null}var f=a(5294),j=a(9737);function w(){let[e,t]=(0,s.useState)([]),[a,i]=(0,s.useState)([]),[o,w]=(0,s.useState)(null),[k,N]=(0,s.useState)(null),[v,C]=(0,s.useState)(""),[S,D]=(0,s.useState)("all");(0,s.useEffect)(()=>{let e=localStorage.getItem("tasks"),a=localStorage.getItem("categories");e&&t(JSON.parse(e)),a&&i(JSON.parse(a))},[]),(0,s.useEffect)(()=>{localStorage.setItem("tasks",JSON.stringify(e))},[e]),(0,s.useEffect)(()=>{localStorage.setItem("categories",JSON.stringify(a))},[a]);let z=a=>{t(e.filter(e=>e.id!==a)),(0,l.Ay)("Zadanie usunięte")},E=a=>{t(e.map(e=>e.id===a?{...e,completed:!e.completed}:e))},I=t=>{let a=e.find(e=>e.id===t);a&&w(a)},A=(()=>{let e=new Map,t=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-orange-500","bg-teal-500","bg-rose-500"];return a=>{if(e.has(a))return e.get(a);let r=0;for(let e=0;e<a.length;e++)r=a.charCodeAt(e)+((r<<5)-r);let s=t[Math.abs(r)%t.length];return e.set(a,s),s}})(),O=t=>{let a=e.filter(e=>e.category===t);return"done"===S&&(a=a.filter(e=>e.completed)),"active"===S&&(a=a.filter(e=>!e.completed)),"title-asc"===v&&a.sort((e,t)=>e.title.localeCompare(t.title)),"title-desc"===v&&a.sort((e,t)=>t.title.localeCompare(e.title)),"date-asc"===v&&a.sort((e,t)=>new Date(e.deadline).getTime()-new Date(t.deadline).getTime()),"date-desc"===v&&a.sort((e,t)=>new Date(t.deadline).getTime()-new Date(e.deadline).getTime()),a};return(0,r.jsxs)(d,{tasks:e,onImport:t,children:[(0,r.jsx)(c,{}),(0,r.jsxs)("div",{className:"mt-24 flex flex-col gap-4 w-full px-4",children:[(0,r.jsx)(g,{tasks:e,onEdit:I,onPreview:N,getCategoryColor:A}),(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,r.jsx)(m,{categories:a,onAdd:e=>{a.includes(e)||(i([...a,e]),l.Ay.success("Dodano kategorię!"))},onDelete:t=>{if(e.some(e=>e.category===t)){l.Ay.error("Nie można usunąć kategorii przypisanej do zadania!");return}i(a.filter(e=>e!==t))}}),(0,r.jsx)(u,{onAdd:(a,r,s,n)=>{t([...e,{id:(0,j.A)(),title:a,description:r,category:s,deadline:n,completed:!1}]),l.Ay.success("Zadanie dodane!")},categories:a})]}),(0,r.jsx)(h,{sort:v,onSortChange:C}),(0,r.jsx)(p,{status:S,onChange:D}),(0,r.jsx)(f.JY,{onDragEnd:a=>{let{source:r,destination:s}=a;if(!s)return;let l=e.find(e=>e.id===a.draggableId);if(!l)return;let n={...l,category:s.droppableId},i=e.filter(e=>e.id!==l.id);i.splice(s.index,0,n),t(i)},children:(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-6",children:a.map(e=>(0,r.jsx)(f.gL,{droppableId:e,children:t=>(0,r.jsxs)("div",{ref:t.innerRef,...t.droppableProps,className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-md min-h-[300px] flex flex-col",children:[(0,r.jsxs)("h3",{className:"text-md font-semibold mb-3 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"w-3 h-3 rounded-full ".concat(A(e))}),e]}),(0,r.jsxs)("ul",{className:"flex-1 space-y-2",children:[O(e).map((e,t)=>(0,r.jsx)(f.sx,{draggableId:e.id,index:t,children:t=>(0,r.jsx)("li",{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,children:(0,r.jsx)(x,{task:e,onToggle:E,onDelete:z,onEdit:I,onPreview:N,getCategoryColor:A})})},e.id)),t.placeholder]})]})},e))})})]}),(0,r.jsx)("div",{className:"fixed bottom-4 right-4 z-50",children:(0,r.jsx)(n,{tasks:e,onImport:t})}),(0,r.jsx)(b,{task:o,onClose:()=>w(null),onSave:a=>{t(e.map(e=>e.id===a.id?a:e))},categories:a}),(0,r.jsx)(y,{task:k,onClose:()=>N(null),getCategoryColor:A})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[309,151,441,684,358],()=>t(141)),_N_E=e.O()}]);